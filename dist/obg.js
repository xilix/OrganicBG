!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.OBG=e():t.OBG=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){var n={},r=null;function s(t){this.limit=t.to,this.limitReach=t.reach,this.length=0,this.data=[],this.pregnants=[],this.deathMarks=[]}function o(t){var e=t.content,r=null,o=null;this.settings=t,this.animId=null,this.DNA=null,this.basesBuffer=new s(t.limit),r=this.basesBuffer,o=this.basesBuffer.data,this.mutagen=function(e){var n,r={mitosis:this.DNA.mitosis.bind(this.DNA),mutagen:this.mutagen.bind(this),W:parseInt(t.content.style.width.split("px")[0]),H:parseInt(t.content.style.height.split("px")[0]),fps:t.fps,dt:1/t.fps};for(n in e)r[n]=e[n];return r},this.loop=function(){var t,n,s="",i="";for(n=o.length,t=0;t<n;t++)o[t].loop(),s+=o[t].getPos()+",",i+=o[t].getImg()+",";r.executeDeathMarks(),r.giveBirthToAll(),e.style.backgroundImage=i.slice(0,-1),e.style.backgroundPosition=s.slice(0,-1)},function(e){var r,s,o,i={};for(e.DNA=new n.DNA(t),r=t.instances.length,s=0;s<r;s++){for(o in i={},t.instances[s])i[o]=t.instances[s][o];i.pos=[],i.pos[0]=parseInt(t.instances[s].pos.split("px ")[0]),i.pos[1]=t.instances[s].pos.split("px ")[1],i.pos[1]=parseInt(i.pos[1].split("px ")[0]),e.basesBuffer.add(e.DNA.mitosis(t.instances[s].DNA,e.mutagen(i)),!0)}}(this)}n.bases=[],n.bases.Particle=function(t){var e=0,n=[];this.pos=t.pos,this.img=t.img,this.DNA=t,this.size=[parseInt(t.img.size[0].split("px")[0]),parseInt(t.img.size[1].split("px")[0])],this.addBehaviour=function(t){n.push(t),e+=1},this.getBehaviours=function(){return n},this.update=function(){var t;for(t=0;t<e&&n[t]();t++);},this.getPos=function(){return this.pos[0]+"px "+this.pos[1]+"px"},this.getImg=function(){return"url("+this.img.src+")"},this.loop=function(){this.update()}},n.PaticleFactory=function(t){var e,r,s=t.behaviours.length;for(e=new n.bases[t.base](t),r=0;r<s;r+=1)n.assemblers[t.behaviours[r].behaviour](e,t.behaviours[r],t);return e.index=t.index,e},n.DNA=function(t){Object.defineProperty(this,"settings",{value:t,writable:!1,enumerable:!0,configurable:!1}),this.mitosis=function(t,e){var n,r=function(t){var e={};return"create"in Object?e=Object.create(t):"object"==typeof JSON?e=JSON.parse(JSON.stringify(t)):e.prototype=t,e}(this.settings.DNA[t]);for(n in e)r[n]=e[n];return r}},s.prototype.clear=function(){return this.length=0,this.paricles=[],this.pregnants=[],this.deathMarks=[],this},s.prototype.add=function(t,e){if(void 0===e||!e)return this.prepareKid(index),this;if(this.length>this.limit){switch(this.limitReach){case"clear":this.clear()}return null}return t.index=this.data.length,t.basesBuffer=this,this.data.push(new n.PaticleFactory(t)),this.length+=1,this.data[this.length-1]},s.prototype.prepareKid=function(t){this.pregnants.push(t)},s.prototype.giveBirthToAll=function(){var t,e=this.pregnants.length;for(t=0;t<e;t+=1)this.add(this.pregnants[t],!0);this.pregnants=[]},s.prototype.deathMark=function(t){this.deathMarks.push(t)},s.prototype.executeDeathMarks=function(){var t,e=this.deathMarks.length;for(t=0;t<e;t+=1)this.remove(this.deathMarks[t],!0);this.deathMarks=[]},s.prototype.remove=function(t,e){var n,r=this.data.length;if(void 0===e||!e)return this.deathMark(t),this;for(n=t;n<r;n++)this.data[n].index-=1;return this.data.splice(t,1),this.length-=1,this},o.prototype.setContent=function(t){content=t,this.basesBuffer.clear()},o.prototype.start=function(){var t,e=this.loop;t=setInterval(function(){try{e()}catch(t){throw this.stop(),t}},Math.round(1e3/this.settings.fps)),this.animId=t},o.prototype.stop=function(){window.clearInterval(this.animId)},n.create=function(t){return new o(t)},n.start=function(t){return(r=new o(t)).start(),r},n.stop=function(t){return null!==r&&r.stop(),r},t.exports=n},function(t,e,n){var r=n(0);r.assemblers=[],r.assemblers.keepInside=function(t,e,n){var r=[999,999],s=function(){};if("string"==typeof e.content)switch(e.content){case"viewport":e.W=n.W,e.H=n.H,e.offX=0,e.offY=0,(r=[[e.offX,e.offY],[e.W+e.offX,e.H+e.offY]])[1][0]-=t.size[0],r[1][1]-=t.size[1]}else switch(e.content.shape){case"square":e.W=e.content.size[0],e.H=e.content.size[1],e.offX=e.content.pos[0],e.offY=e.content.pos[1],(r=[[e.offX,e.offY],[e.W+e.offX,e.H+e.offY]])[1][0]-=t.size[0],r[1][1]-=t.size[1]}switch(e.how){case"stop":s=function(e){t.pos=e.pos,t.v=[0,0]};break;case"update":s=function(e){t.pos=e.pos};break;case"bounce":s=function(e){t.pos=e.pos,e.hit[0]&&(t.v[0]=-t.v[0]),e.hit[1]&&(t.v[1]=-t.v[1])};break;case"die":s=function(e){n.basesBuffer.deathMark(t.index)}}return t.addBehaviour(function(){var e=!0,n={pos:t.pos,hit:[!1,!1]};return t.pos[0]>r[1][0]&&(n.pos[0]=r[1][0],n.hit[0]=!0,e=!1),t.pos[1]>r[1][1]&&(n.pos[1]=r[1][1],n.hit[1]=!0,e=!1),t.pos[0]<r[0][0]&&(n.pos[0]=r[0][0],n.hit[0]=!0,e=!1),t.pos[1]<r[0][1]&&(n.pos[1]=r[0][1],n.hit[1]=!0,e=!1),e||s(n),!0}),t},r.assemblers.move=function(t,e,n){return t.v=[0,0],void 0!==e.v&&(t.v[0]=e.v[0],t.v[1]=e.v[1]),void 0!==t.DNA.v&&(t.v[0]=t.DNA.v[0],t.v[1]=t.DNA.v[1]),t.addBehaviour(function(){return t.pos[0]+=t.v[0],t.pos[1]+=t.v[1],!0}),t},r.assemblers.randomMovment=function(t,e,n){var r=1-e.P/n.fps,s=e.T,o=n.dt,i=o;return t.addBehaviour(function(){return(i<o||Math.random()>r)&&(t.v=[Math.round(e.v*Math.random()*(1-2*Math.random())),Math.round(e.v*Math.random()*(1-2*Math.random()))]),s&&(i+=o,i%=s),!0}),t},r.assemblers.randomTeleport=function(t,e,n){var r=1-e.P/n.fps,s=e.T,o=n.dt,i=o;return t.addBehaviour(function(){return(i<o||Math.random()>r)&&(t.pos=[Math.round(n.W*Math.random()),Math.round(n.H*Math.random())]),s&&(i+=o,i%=s),!0}),t},r.assemblers.brownianMovment=function(t,e,n){var r=1-e.P/n.fps,s=e.T,o=n.dt,i=o;return t.addBehaviour(function(){return(i<o||Math.random()>r)&&(t.v=[t.v[0]+Math.round(e.v*Math.random()*(1-2*Math.random())),t.v[1]+Math.round(e.v*Math.random()*(1-2*Math.random()))]),s&&(i+=o,i%=s),!0}),t},r.assemblers.randomWalker=function(t,e,n){var r=1-e.P/n.fps,s=e.T,o=n.dt,i=o;return t.addBehaviour(function(){return(i<o||Math.random()>r)&&(t.pos=[t.pos[0]+Math.round(e.d*Math.random()*(1-2*Math.random())),t.pos[1]+Math.round(e.d*Math.random()*(1-2*Math.random()))]),s&&(i+=o,i%=s),!0}),t},r.assemblers.clone=function(t,e,n){var r=1-e.P/n.fps,s=e.T,o=n.dt,i=o;return t.addBehaviour(function(){return(i<o||Math.random()>r)&&n.basesBuffer.prepareKid(t.DNA),s&&(i+=o,i%=s),!0}),t},r.assemblers.eject=function(t,e,n){var r=1-e.P/n.fps,s=e.T,o=n.dt,i=o;return t.addBehaviour(function(){return(i<o||Math.random()>r)&&n.basesBuffer.prepareKid(n.mitosis(e.DNA,n.mutagen({pos:[t.pos[0]+Math.round(t.size[0]/2),t.pos[1]+Math.round(t.size[1]/2)]}))),s&&(i+=o,i%=s),!0}),t},r.assemblers.die=function(t,e,n){var r=1-e.P/n.fps,s=e.T,o=n.dt,i=o;return t.addBehaviour(function(){return(i<o||Math.random()>r)&&n.basesBuffer.deathMark(t.index),s&&(i+=o,i%=s),!0}),t},r.assemblers.fall=function(t,e,n){return t.addBehaviour(function(){return t.v[0]+=e.a[0],t.v[1]+=e.a[1],!0}),t},r.assemblers.randomFall=function(t,e,n){var r=1-e.P/n.fps,s=e.T,o=n.dt,i=o;return t.addBehaviour(function(){return(i<o||Math.random()>r)&&(t.v[0]+=Math.random()*e.a[0]-e.offset[0],t.v[1]+=Math.random()*e.a[1]-e.offset[1]),s&&(i+=o,i%=s),!0}),t},r.assemblers.resistance=function(t,e,n){return t.addBehaviour(function(){return t.v[0]*=1-e.rho[0],t.v[1]*=1-e.rho[1],!0}),t},r.assemblers.magnet=function(t,e,n){var r=[0,0];function s(t){return t>0?1:t<0?-1:0}return r="object"!=typeof e.F?[e.F,e.F]:[e.F[0],e.F[1]],t.addBehaviour(function(){var n,o,i;function a(){if(n=[t.pos[0]-e.pos[0],t.pos[1]-e.pos[1]],[0,0],i=[0,0],!((o=n[0]*n[0]+n[1]*n[1])>1))return t.v=[0,0],!0;(n[0]<-1||n[0]>1)&&(i[0]=-r[0]*(n[0]/Math.sqrt(o))/o),(n[1]<-1||n[1]>1)&&(i[1]=-r[1]*(n[1]/Math.sqrt(o))/o)}return a(),s(t.pos[0]+t.v[0]+i[0]-e.pos[0])!=s(n[0])&&s(t.pos[1]+t.v[1]+i[1]-e.pos[1])!=s(n[1])?(t.pos[0]=e.pos[0]-n[0],t.pos[1]=e.pos[1]-n[1],a(),!0):(t.v[0]+=i[0],t.v[1]+=i[1],!0)}),t},r.assemblers.atractor=function(t,e,n){var r=[0,0];return r="object"!=typeof e.F?[e.F,e.F]:[e.F[0],e.F[1]],t.addBehaviour(function(){var n=[-1,0];return n=[t.pos[0]-e.pos[0]<0?-1:n[0],t.pos[1]-e.pos[1]<0?-1:n[1]],n=[t.pos[0]-e.pos[0]>0?1:n[0],t.pos[1]-e.pos[1]>0?1:n[1]],t.v[0]-=r[0]*n[0],t.v[1]-=r[1]*n[1],!0}),t},r.assemblers.dummy=function(t,e,n){return t},t.exports=r},function(t,e,n){t.exports=n(1)}])});